<template>
  <t-card
    :class="{
      'dashboard-card': true,
      'no-border': !haveBorder,
      'hover-shadow': hoverShadow,
    }"
    :body-style="{ ...bodyStyle, height: '100%' }"
    shadow="never"
  >
    <span class="dashboard-title">{{ options.title }}</span>
    <div class="dashboard-content">
      <count-to
        :end-val="options.end"
        :start-val="options.begin"
        :decimals="options.dot"
        :duration="options.duration"
        :autoplay="options.auto"
        :prefix="options.prefix"
        :suffix="options.suffix"
      />
      <div class="icon-back">
        <i>
          <svg v-if="options.mainIcon === 'RMBc'" viewBox="0 0 1024 1024" width="40" height="40"><path d="M512 96c229.76 0 416 186.24 416 416S741.76 928 512 928 96 741.76 96 512 282.24 96 512 96z m0 64C317.589333 160 160 317.589333 160 512S317.589333 864 512 864 864 706.410667 864 512 706.410667 160 512 160z m105.386667 117.034667l45.226666 45.248-136.661333 136.682666H682.666667v64h-138.666667v81.941334H682.666667v64h-138.666667v100.8h-64v-100.8H341.333333v-64h138.666667v-81.941334H341.333333v-64h156.714667l-136.682667-136.682666 45.269334-45.226667L512 382.4l105.386667-105.386667z" fill="#1890ff"></path></svg>
          <svg v-if="options.mainIcon === 'RMBs'" viewBox="0 0 1024 1024" width="40" height="40"><path d="M362.666667 332.8l93.866666 93.866667H341.333333v85.333333h128v42.666667H341.333333v85.333333h128v85.333333h85.333334v-85.333333h128v-85.333333h-128v-42.666667h128v-85.333333h-115.2l93.866666-93.866667-59.733333-59.733333L512 362.666667 422.4 273.066667 362.666667 332.8z" fill="#1890ff"></path><path d="M896 128H128c-25.6 0-42.666667 17.066667-42.666667 42.666667v682.666666c0 25.6 17.066667 42.666667 42.666667 42.666667h768c25.6 0 42.666667-17.066667 42.666667-42.666667V170.666667c0-25.6-17.066667-42.666667-42.666667-42.666667z m-42.666667 682.666667H170.666667V213.333333h682.666666v597.333334z" fill="#1890ff"></path></svg>
          <svg v-if="options.mainIcon === 'user'" viewBox="0 0 1024 1024" width="40" height="40"><path d="M516.4 517.4c125 0 226.7-101.7 226.7-226.7 0-18.5-15-33.4-33.4-33.4s-33.4 15-33.4 33.4c0 88.2-71.7 159.9-159.9 159.9s-159.9-71.7-159.9-159.9 71.7-159.9 159.9-159.9c22.7 0 44.6 4.6 65.1 13.8 16.8 7.5 36.6 0 44.1-16.9 7.5-16.8 0-36.6-16.9-44.1-29.2-13-60.2-19.6-92.4-19.6-125 0-226.7 101.7-226.7 226.7s101.8 226.7 226.8 226.7zM619.8 556.8H413c-155.8 0-282.5 126.7-282.5 282.5v55.5c0 18.5 15 33.4 33.4 33.4s33.4-15 33.4-33.4v-55.5c0-118.9 96.8-215.7 215.7-215.7h206.7c118.9 0 215.7 96.8 215.7 215.7v55.5c0 18.5 15 33.4 33.4 33.4 18.5 0 33.4-15 33.4-33.4v-55.5c0.1-155.8-126.6-282.5-282.4-282.5z" fill="#1890ff"></path><path d="M674.7 190.9m-33.4 0a33.4 33.4 0 1 0 66.8 0 33.4 33.4 0 1 0-66.8 0Z" fill="#1890ff"></path></svg>
          <svg v-if="options.mainIcon === 'order'" viewBox="0 0 1024 1024" version="1.1" width="40" height="40"><path d="M608 42.666667a106.709333 106.709333 0 0 1 101.781333 74.666666h33.536c83.072 0 149.973333 69.184 152.597334 154.752L896 277.333333v533.333334c0 86.186667-65.237333 157.12-147.626667 159.914666l-5.056 0.085334H280.682667c-83.072 0-149.973333-69.184-152.597334-154.752L128 810.666667V277.333333c0-86.186667 65.237333-157.12 147.626667-159.914666l5.056-0.085334h33.536A106.709333 106.709333 0 0 1 416 42.666667zM314.218667 181.333333h-33.536c-47.104 0-86.314667 40.106667-88.576 91.306667L192 277.333333v533.333334c0 51.84 37.824 93.482667 84.416 95.893333l4.266667 0.106667h462.634666c47.104 0 86.314667-40.106667 88.576-91.306667L832 810.666667V277.333333c0-51.84-37.824-93.482667-84.416-95.893333l-4.266667-0.106667H709.76A106.709333 106.709333 0 0 1 608 256h-192a106.709333 106.709333 0 0 1-101.781333-74.666667zM693.333333 618.666667a32 32 0 0 1 0 64h-362.666666a32 32 0 0 1 0-64h362.666666z m0-192a32 32 0 0 1 0 64h-362.666666a32 32 0 0 1 0-64h362.666666z m-85.333333-320h-192a42.666667 42.666667 0 1 0 0 85.333333h192a42.666667 42.666667 0 1 0 0-85.333333z" fill="#1890ff"></path></svg>
        </i>
      </div>
    </div>
    <div class="dashboard-footer">
      <span>
        {{ options.dataFrom }}
      </span>
      <i style="margin: 0 5px;">
        <svg v-if="options.dataStatus === 'rise'" viewBox="0 0 1024 1024" width="18" height="18"><path d="M511.976976 945.959599c-239.47514 0-433.597349-194.300264-433.597349-433.964716 0-239.677754 194.122209-433.955506 433.597349-433.955506s433.642374 194.277752 433.642374 433.955506C945.61935 751.659335 751.453139 945.959599 511.976976 945.959599zM666.05312 408.869155l-131.822304-132.292002c-2.899026-4.303003-7.091512-7.870248-12.509918-9.766434-2.876514-1.137916-5.952572-1.64957-9.119705-1.582031-0.222057 0-0.401136-0.112564-0.623193-0.112564-0.289596 0-0.535189 0.13303-0.847298 0.156566-3.03308-0.044002-6.021134 0.423649-8.830109 1.515516-5.507434 1.918699-9.787924 5.528923-12.664438 9.945513L357.945857 408.869155c-9.275247 9.29776-8.562003 25.061792 1.560542 35.184337 10.168594 10.146081 25.463951 10.413164 34.739199 1.11438 0.73678-0.735757 1.471514-1.248434 2.073218-2.073218l89.747024-89.456405 0.245593 399.136489c-0.155543 0.936325 0 1.783623 0 2.76395 0 12.352329 10.992355 22.342868 25.352411 22.342868 14.314007 0 25.976628-9.990538 25.976628-22.342868l0.289596-401.923976 89.771583 89.478917c0.599657 0.825808 1.335415 1.337461 2.049682 2.073218 9.29776 9.29776 24.595164 9.030677 34.740222-1.11438C674.615123 433.930947 675.351903 418.166915 666.05312 408.869155z" fill="#ffffff"></path></svg>
        <svg v-if="options.dataStatus === 'fall'" viewBox="0 0 1024 1024" width="18" height="18"><path d="M945.61935 512.005117c0 239.677754-194.166211 433.955506-433.642374 433.955506S78.379627 751.682871 78.379627 512.005117c0-239.664452 194.122209-433.964716 433.597349-433.964716S945.61935 272.340665 945.61935 512.005117zM664.492578 579.947532c-10.145058-10.146081-25.442462-10.413164-34.740222-1.115404-0.714268 0.735757-1.450025 1.248434-2.049682 2.073218l-89.771583 89.478917-0.289596-401.923976c0-12.352329-11.661597-22.342868-25.976628-22.342868-14.360056 0-25.352411 9.990538-25.352411 22.342868 0 0.980327-0.155543 1.827625 0 2.76395l-0.245593 399.136489-89.747024-89.456405c-0.602727-0.825808-1.337461-1.338485-2.073218-2.073218-9.275247-9.29776-24.571628-9.030677-34.739199 1.115404-10.123568 10.122545-10.836813 25.886577-1.560542 35.184337l131.689275 132.135436c2.876514 4.415566 7.157004 8.027837 12.664438 9.945513 2.808976 1.091868 5.79703 1.559519 8.830109 1.515516 0.312108 0.022513 0.557702 0.155543 0.847298 0.155543 0.223081 0 0.402159-0.11154 0.623193-0.11154 3.167133 0.067538 6.244214-0.445138 9.119705-1.583055 5.418406-1.895163 9.610892-5.462408 12.509918-9.765411l131.822304-132.292002C675.351903 605.833085 674.615123 590.069053 664.492578 579.947532z" fill="#ffffff"></path></svg>
        <svg v-if="options.dataStatus === 'riseC'" viewBox="0 0 1024 1024" width="18" height="18"><path d="M511.976976 945.959599c-239.47514 0-433.597349-194.300264-433.597349-433.964716 0-239.677754 194.122209-433.955506 433.597349-433.955506s433.642374 194.277752 433.642374 433.955506C945.61935 751.659335 751.453139 945.959599 511.976976 945.959599zM666.05312 408.869155l-131.822304-132.292002c-2.899026-4.303003-7.091512-7.870248-12.509918-9.766434-2.876514-1.137916-5.952572-1.64957-9.119705-1.582031-0.222057 0-0.401136-0.112564-0.623193-0.112564-0.289596 0-0.535189 0.13303-0.847298 0.156566-3.03308-0.044002-6.021134 0.423649-8.830109 1.515516-5.507434 1.918699-9.787924 5.528923-12.664438 9.945513L357.945857 408.869155c-9.275247 9.29776-8.562003 25.061792 1.560542 35.184337 10.168594 10.146081 25.463951 10.413164 34.739199 1.11438 0.73678-0.735757 1.471514-1.248434 2.073218-2.073218l89.747024-89.456405 0.245593 399.136489c-0.155543 0.936325 0 1.783623 0 2.76395 0 12.352329 10.992355 22.342868 25.352411 22.342868 14.314007 0 25.976628-9.990538 25.976628-22.342868l0.289596-401.923976 89.771583 89.478917c0.599657 0.825808 1.335415 1.337461 2.049682 2.073218 9.29776 9.29776 24.595164 9.030677 34.740222-1.11438C674.615123 433.930947 675.351903 418.166915 666.05312 408.869155z" fill="#13ce66"></path></svg>
        <svg v-if="options.dataStatus === 'fallC'" viewBox="0 0 1024 1024" width="18" height="18"><path d="M945.61935 512.005117c0 239.677754-194.166211 433.955506-433.642374 433.955506S78.379627 751.682871 78.379627 512.005117c0-239.664452 194.122209-433.964716 433.597349-433.964716S945.61935 272.340665 945.61935 512.005117zM664.492578 579.947532c-10.145058-10.146081-25.442462-10.413164-34.740222-1.115404-0.714268 0.735757-1.450025 1.248434-2.049682 2.073218l-89.771583 89.478917-0.289596-401.923976c0-12.352329-11.661597-22.342868-25.976628-22.342868-14.360056 0-25.352411 9.990538-25.352411 22.342868 0 0.980327-0.155543 1.827625 0 2.76395l-0.245593 399.136489-89.747024-89.456405c-0.602727-0.825808-1.337461-1.338485-2.073218-2.073218-9.275247-9.29776-24.571628-9.030677-34.739199 1.115404-10.123568 10.122545-10.836813 25.886577-1.560542 35.184337l131.689275 132.135436c2.876514 4.415566 7.157004 8.027837 12.664438 9.945513 2.808976 1.091868 5.79703 1.559519 8.830109 1.515516 0.312108 0.022513 0.557702 0.155543 0.847298 0.155543 0.223081 0 0.402159-0.11154 0.623193-0.11154 3.167133 0.067538 6.244214-0.445138 9.119705-1.583055 5.418406-1.895163 9.610892-5.462408 12.509918-9.765411l131.822304-132.292002C675.351903 605.833085 674.615123 590.069053 664.492578 579.947532z" fill="#ff4d4f"></path></svg>
      </i>
      <span v-if="options.dataStatus === 'rise' || options.dataStatus === 'fall'" style="color: #fff">{{ options.dataNum }}</span>
      <span v-if="options.dataStatus === 'riseC'" style="color: #13ce66">{{ options.dataNum }}</span>
      <span v-if="options.dataStatus === 'fallC'" style="color: #ff4d4f">{{ options.dataNum }}</span>
    </div>
  </t-card>
</template>

<script lang="ts">
  import { CSSProperties, defineComponent } from 'vue'
  import Mock from 'mockjs'

  type CardOptions = {
    title?: string
    begin?: number
    end?: number
    duration?: number
    dot?: number
    auto?: boolean
    breakAll?: boolean
    prefix?: string
    suffix?: string
    mainIcon?:
      | 'RMBc'
      | 'RMBs'
      | 'user'
      | 'order'
    dataFrom?: string
    dataStatus?:
      | 'rise'
      | 'fall'
      | 'riseC'
      | 'fallC'
    dataNum?: string
  }

  export default defineComponent({
    name: 'DashboardCard',
    props: {
      options: {
        type: Object as PropType<CardOptions>,
        default: () => ({
          title: '标题',
          begin: 0,
          end: Mock.mock('@float(100, 50000, 2, 2)'),
          duration: 5000,
          dot: 0,
          auto: true,
          breakAll: true,
          prefix: '',
          suffix: '',
          mainIcon: 'RMBc',
          dataFrom: '',
          dataStatus: 'rise',
          dataNum: ''
        })
      },
      haveBorder: {
        type: Boolean,
        default: true
      },
      hoverShadow: {
        type: Boolean,
        default: true
      },
      bodyStyle: {
        type: Object as PropType<CSSProperties>,
        default: () => ({})
      }
    }, 
    setup() {
      return {
      }
    }
  })
</script>

<style scoped lang="scss">
.dashboard-card {
  width: 25%;
  margin: 0 10px;
  background-color: transparent;
  box-sizing: border-box;
  ::v-deep .el-card {
    height: 100%;
  }
}
.no-border {
  ::v-deep .el-card {
    border: none ;
  }
}
.hover-shadow {
  &:hover {
    transition: all .2s;
    box-shadow: 0 0 15px #979797;;
  }
}
.dashboard-title {
  font-size: 0.9rem;
}
.dashboard-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 1.8rem;
  margin: 0.6rem 0;
  .icon-back {
    width: 4rem;
    height: 4rem;
    background-color: #e8f4ff;
    border-radius: 50%;
    color: #1890ff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
  }
}
.dashboard-footer {
  font-size: 0.9rem;
  display: flex;
  align-items: center;
}
</style>
